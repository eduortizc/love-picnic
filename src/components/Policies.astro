---
// src/components/Policies.astro
---

<div id="policiesModal" class="fixed inset-0 z-[200] hidden bg-black/50 backdrop-blur-md flex items-center justify-center p-4">
    <div class="bg-[#0F1F38] border border-picnic-gold rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl relative animate-fade-in-up">
        
        <div class="p-6 border-b border-white/10 bg-[#0B1829] rounded-t-2xl">
            <h3 class="text-picnic-gold font-serif text-2xl text-center uppercase tracking-widest">Políticas del Servicio</h3>
            <p class="text-white/60 text-xs text-center mt-2 font-light">Para garantizar el mejor servicio, por favor lee y acepta nuestras políticas.</p>
        </div>

        <div class="p-6 overflow-y-auto custom-scrollbar space-y-6 text-gray-200 text-sm font-light leading-relaxed">
            
            <div class="bg-white/5 p-5 rounded-lg border border-white/5 hover:border-picnic-gold/30 transition-colors">
                <h4 class="text-picnic-gold font-bold uppercase tracking-wider mb-3 flex items-center gap-2 text-xs md:text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                    Servicio a Domicilio / Flete
                </h4>
                <ul class="space-y-2 ml-1 text-xs md:text-sm text-gray-300">
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Picnics, Teepees y Cinema (Mérida):</strong> Envío incluido en el precio.</span></li>
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Zonas fuera de Mérida (Playa u otros):</strong> Aplica costo adicional.</span></li>
                </ul>
            </div>

            <div class="bg-white/5 p-5 rounded-lg border border-white/5 hover:border-picnic-gold/30 transition-colors">
                <h4 class="text-picnic-gold font-bold uppercase tracking-wider mb-3 flex items-center gap-2 text-xs md:text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    Políticas de Pago
                </h4>
                <ul class="space-y-2 ml-1 text-xs md:text-sm text-gray-300">
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Anticipo:</strong> 50% para apartar fecha deseada. Enviar comprobante para confirmar.</span></li>
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Liquidación:</strong> El evento debe estar pagado 100% un día antes de la fecha.</span></li>
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Formas de Pago:</strong> Solo transferencias bancarias.</span></li>
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Servicio Express:</strong> Sin recargo si reservas con 2 semanas de anticipación.</span></li>
                </ul>
            </div>

            <div class="bg-white/5 p-5 rounded-lg border border-white/5 hover:border-picnic-gold/30 transition-colors">
                <h4 class="text-picnic-gold font-bold uppercase tracking-wider mb-3 flex items-center gap-2 text-xs md:text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    Duración del Evento
                </h4>
                <ul class="space-y-2 ml-1 text-xs md:text-sm text-gray-300">
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Tiempo del Servicio:</strong> 2 horas (Picnics fiesta: 4 horas). Si requieres horas extra, cotízalo.</span></li>
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Montaje:</strong> 1 hora antes.
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Desmontaje:</strong> Al finalizar el tiempo estipulado.</span></li>
                </ul>
            </div>

            <div class="bg-white/5 p-5 rounded-lg border border-white/5 hover:border-picnic-gold/30 transition-colors">
                <h4 class="text-picnic-gold font-bold uppercase tracking-wider mb-3 flex items-center gap-2 text-xs md:text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    Responsabilidad del Cliente
                </h4>
                <p class="text-xs md:text-sm text-gray-300 ml-1">Los clientes son responsables de los artículos (vajilla, decoración, teepee, picnic, cinema). En caso de <strong>daños, pérdidas o manchas</strong>, se aplicará un cargo adicional.</p>
            </div>

             <div class="bg-white/5 p-5 rounded-lg border border-white/5 hover:border-picnic-gold/30 transition-colors">
                <h4 class="text-picnic-gold font-bold uppercase tracking-wider mb-3 flex items-center gap-2 text-xs md:text-sm">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z" /></svg>
                    Cambios de fechas:
                </h4>
                <ul class="space-y-2 ml-1 text-xs md:text-sm text-gray-300">
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Mal clima o Fuerza Mayor:</strong> Se puede reprogramar sin costo (sujeto a disponibilidad) con 1 día de anticipación.</span></li>
                    <li class="flex items-start"><span class="text-picnic-gold mr-2">▪</span><span><strong>Cambio mismo día:</strong> Se cobrarán los gastos generados hasta el momento.</span></li>
                </ul>
            </div>

        </div>

        <div class="p-6 border-t border-white/10 bg-[#0B1829] rounded-b-2xl flex flex-col md:flex-row gap-3">
            <button onclick="closePoliciesModal()" class="flex-1 py-3 border border-white/20 text-white/70 hover:bg-white/5 hover:text-white rounded uppercase text-xs tracking-widest transition-colors">
                Cancelar
            </button>
            <button onclick="acceptPoliciesAndOpenComponent()" class="flex-[2] py-3 bg-picnic-gold hover:bg-white text-picnic-navy font-bold uppercase text-xs tracking-widest shadow-lg shadow-picnic-gold/20 flex items-center justify-center gap-2 transition-all transform hover:-translate-y-1">
                <span>He leído y Acepto</span>
            </button>
        </div>
    </div>
</div>

<style>
  .custom-scrollbar::-webkit-scrollbar { width: 4px; }
  .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(212, 175, 55, 0.4); border-radius: 10px; }
</style>

<script is:inline>
    // 1. ABRIR (llamado desde Navbar)
    window.openPoliciesModal = function() {
        const modal = document.getElementById('policiesModal');
        // También cerramos el carrito por si acaso
        const cart = document.getElementById('cartDropdown');
        if(cart) cart.classList.remove('cart-open');
        
        if(modal) modal.classList.remove('hidden');
    }

    // 2. CERRAR
    window.closePoliciesModal = function() {
        const modal = document.getElementById('policiesModal');
        if(modal) modal.classList.add('hidden');
    }

    // 3. ACEPTAR -> IR A CHECKOUT
    window.acceptPoliciesAndOpenComponent = function() {
        // Cierra políticas
        window.closePoliciesModal();

        // Abre Checkout (función global de CheckOutForm.astro)
        if (typeof window.showCheckout === 'function') {
            window.showCheckout(); 
        } else {
            console.error("No se encontró CheckOutForm. Asegúrate de importar <CheckOutForm /> en Navbar.");
        }
    }
</script>